<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Workout Runner (Beginner)</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin: 0; background:#0b0f14; color:#e8eef6; }
    .wrap { max-width: 920px; margin: 0 auto; padding: 16px; }
    .top { display:flex; gap:12px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    .pill { background:#141c26; border:1px solid #243446; padding:10px 12px; border-radius:999px; }
    .time { font-variant-numeric: tabular-nums; font-weight:900; letter-spacing:0.5px; }
    .big { font-size: 20px; }

    .tabs { display:flex; gap:10px; flex-wrap:wrap; margin-top: 12px; }
    .day-select {
      padding:8px 10px;
      border-radius:999px;
      border:1px solid #2b3f56;
      background:#152235;
      color:#e8eef6;
      font-weight:600;
      font-size:14px;
    }
    .day-select:focus {
      outline:none;
      border-color:#355b8f;
    }
    .tabbtn{
      border-radius:999px; padding:10px 12px; border:1px solid #2b3f56;
      background:#152235; color:#e8eef6; font-weight:900; cursor:pointer;
    }
    .tabbtn.active{ background:#1f3b63; border-color:#355b8f; }

    .card { background:#0f1722; border:1px solid #223244; border-radius:16px; padding:14px; margin-top: 12px; box-shadow: 0 10px 25px rgba(0,0,0,.25); }
    .grid { display:grid; grid-template-columns: 96px 1fr; gap:12px; align-items:center; }
    img.thumb { width:96px; height:96px; object-fit:cover; border-radius:14px; border:1px solid #223244; background:#0b0f14; }

    h2 { font-size: 16px; margin: 0 0 6px 0; }
    .muted { color:#b8c7da; font-size: 13px; }
    .row { display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; }
    .kv { background:#141c26; border:1px solid #243446; border-radius:12px; padding:10px 12px; }
    .kv b { display:block; font-size: 12px; color:#b8c7da; margin-bottom:2px; }
    .kv span { font-weight:900; }

    .controls { display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-top: 12px; }
    button {
      width:100%; padding:14px 14px; border-radius:14px; border:1px solid #2b3f56;
      background:#152235; color:#e8eef6; font-weight:900; font-size: 15px; cursor:pointer;
    }
    button.primary { background:#1f3b63; border-color:#355b8f; }
    button.danger { background:#3a1c22; border-color:#6a2a35; }
    button:active { transform: translateY(1px); }

    .footer {
      margin-top: 6px;
      display:flex;
      gap:8px;
      justify-content:space-between;
    }
    .footer button {
      flex: 1;
      min-width: 0;
      padding:10px 12px;
      font-size:14px;
      border-radius:10px;
    }

    .mini { font-size: 12px; color:#b8c7da; margin-top: 10px; line-height: 1.35; }
    .setline { font-variant-numeric: tabular-nums; font-weight: 900; }
    .plan { margin-top:10px; font-size:12px; color:#b8c7da; line-height:1.5; }
    .plan b { color:#e8eef6; }
    .warn { display:none; margin-top:8px; color:#ffb4b4; font-size:12px; }

    .top-timer-row {
      display:flex;
      align-items:center;
      gap:8px;
      margin-top:4px;
    }
    .mini-action {
      width:auto;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid #2b3f56;
      background:#152235;
      color:#e8eef6;
      font-weight:700;
      font-size:11px;
      cursor:pointer;
    }
    .mini-action.primary {
      background:#1f3b63;
      border-color:#355b8f;
    }

    button.ghost {
      background:#0f1722;
      border-color:#2b3f56;
      color:#b8c7da;
    }
    button.ghost:active {
      transform: translateY(1px);
    }

    .next-ready {
      background: #1f8f4a !important;
      border-color: #29b15c !important;
      color: #ffffff !important;
    }

    .quote {
      margin-top: 10px;
      padding: 10px 12px;
      background: #111820;
      border-left: 4px solid #f5c400;
      color: #f5c400;
      font-weight: 900;
      font-size: 13px;
      line-height: 1.35;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="pill">
        <div class="muted">Workout</div>
        <div class="top-timer-row">
          <div class="time big" id="workoutTime">0:00</div>
          <button class="mini-action primary" id="btnStartWorkout">Start</button>
        </div>
      </div>
      <div class="pill">
        <div class="muted">Rest</div>
        <div class="top-timer-row">
          <div class="time big" id="restTime">0:00</div>
          <button class="mini-action" id="btnStartRest">Start</button>
        </div>
      </div>
    </div>

    <div class="tabs">
      <label class="muted" for="daySelect">Day</label>
      <select id="daySelect" class="day-select">
        <option value="day1">Upper 1 ‚Äì Push</option>
        <option value="day2">Upper 2 ‚Äì Pull</option>
        <option value="day3">Upper 3 ‚Äì Shoulders & Arms</option>
        <option value="leg1">Leg 1 ‚Äì Quads & Glutes</option>
        <option value="leg2">Leg 2 ‚Äì Posterior Chain</option>
      </select>
    </div>

<div class="card">
      <!-- Normal exercise view -->
      <div class="grid" id="exerciseGrid">
        <div>
          <img class="thumb" id="exImg" alt="exercise image"
               onerror="this.style.display='none'; document.getElementById('imgErr').style.display='block';" />
          <div class="warn" id="imgErr">Image not found ‚Äî check filename in repo (must match exactly).</div>
          <div id="quoteBox" class="quote">‚ÄúEvery workout is a step forward.‚Äù</div>
        </div>

        <div>
          <h2 id="exName">‚Äî</h2>
          <div class="muted" id="exNotes">‚Äî</div>

          <div class="row">
            <div class="kv"><b>Sets √ó Reps</b><span id="exSetsReps">‚Äî</span></div>
            <div class="kv"><b>Beginner Weight</b><span id="exWeight">‚Äî</span></div>
            <div class="kv"><b>Set</b><span class="setline" id="exSetTracker">‚Äî</span></div>
          </div>
        </div>
      </div>

      <!-- NEW: Workout complete view (uses same container) -->
      <div id="completionView"
           style="display:none; text-align:center; padding:16px 8px;">
        <!-- Put whatever picture you want here -->
        <img src="./workout-complete.png"
             alt="Workout complete"
             class="thumb"
             style="max-width:220px; border-radius:16px; margin-bottom:12px;">

        <!-- Audio clip shown instead of popup -->
        <audio id="completionAudio" src="./workout-complete.mp3"></audio>
      </div>

      <div class="controls">
        <button id="btnSetDone">Set Done</button>
        <button class="danger" id="btnResetSet">Reset Sets</button>
      </div>

      <div class="footer">
        <button id="btnPrev" class="ghost">‚óÄ Prev</button>
        <button id="btnNext" class="primary">Next ‚ñ∂</button>
      </div>

      <div class="mini">
        <b>Rules:</b> leave ~2 reps in reserve; clean form.
        <b>Progress:</b> hit top reps on all sets ‚Üí add 5 lb next session.
      </div>

      <div class="plan" id="planList"></div>
    </div>

  </div>

  <!-- AUDIO ELEMENTS -->
  <audio id="audioIntro" src="intro.mp3"></audio>
  <audio id="audioSetDone" src="set-done.mp3"></audio>
  <audio id="audioRestComplete" src="rest-complete.mp3"></audio>
  <audio id="audioWorkoutComplete" src="workout-complete.mp3"></audio>
  <audio id="audioSwipe" src="swipe.mp3"></audio>
  <audio id="audioFinalSet" src="final-set.mp3"></audio>
  
<script>
  const QUOTES = [
    "Every workout is a step forward.",
    "You miss 100% of the shots you don‚Äôt take.",
    "Your limits are all in your mind.",
    "Motivation ignites the spark, habit fuels the fire.",
    "Strength does not come from physical capacity. It comes from an indomitable will.",
    "Success isn‚Äôt about greatness. It‚Äôs about consistency.",
    "Train hard to change.",
    "Endure the pain, enjoy the gain.",
    "No matter how slow you go, you‚Äôre still lapping everybody on the couch.",
    "The body achieves what the mind believes.",
    "The real workout starts when you want to stop.",
    "I hated every minute of training, but I said, ‚ÄòDon‚Äôt quit.‚Äô",
    "We are what we repeatedly do. Excellence then is not an act but a habit.",
    "Push harder than yesterday.",
    "The hard days are the best because that‚Äôs when champions are made.",
    "If you don‚Äôt find the time, if you don‚Äôt do the work, you don‚Äôt get the results.",
    "Sweat is your body‚Äôs way of showing progress.",
    "Pain is temporary, but pride is forever.",
    "Strong today, stronger tomorrow.",
    "Working out is not about being better than someone else. It‚Äôs about being better than you used to be.",
    "Don‚Äôt wait until you‚Äôve reached your goal to be proud of yourself.",
    "Your body hears everything your mind says.",
    "It‚Äôs up to you to start making healthy choices today.",
    "Stay focused. Stay committed. Stay disciplined.",
    "A slow progress is still progress.",
    "If it doesn‚Äôt challenge you, it won‚Äôt change you.",
    "Discipline is doing what you hate, but doing it like you love it.",
    "Your future self will thank you for today‚Äôs workout.",
    "Every workout is progress.",
    "Believe in yourself and you will be unstoppable.",
    "Train like a beast.",
    "You get what you work for.",
    "No pain, no gain.",
    "Push yourself because no one else will do it for you.",
    "Work out as if your life depends on it, because it does.",
    "If you want to achieve what very few people do, you have to do what most people won‚Äôt.",
    "Get comfortable being uncomfortable.",
    "What would you rather feel ‚Äî the sting of discipline or the pain of regret?",
    "Do it for her.",
    "Discipline equals freedom.",
    "Push past your limits.",
    "Train insane or remain the same.",
    "Stay positive.",
    "Don‚Äôt stop when you‚Äôre tired ‚Äî stop when you‚Äôre done.",
    "Victory loves preparation.",
    "Be stronger than your excuses.",
    "One more rep.",
    "Today‚Äôs pain is tomorrow‚Äôs strength.",
    "Stay consistent ‚Äî results will follow.",
    "Success is the sum of small efforts repeated day in and day out.",
    "You don‚Äôt get what you wish for. You get what you work for.",
    "One workout at a time.",
    "Earn your strength.",
    "Results happen when excuses stop.",
    "Show up. Put in work. Stay consistent.",
    "Hard work beats talent when talent doesn‚Äôt work hard.",
    "Today‚Äôs effort is tomorrow‚Äôs progress.",
    "You came this far ‚Äî don‚Äôt stop now.",
    "Strength is built when no one is watching.",
    "Prove it to yourself.",
    "Every rep counts.",
    "Your body can handle it. Your mind must believe it.",
    "Progress, not perfection.",
    "Do the work others won‚Äôt.",
    "This is where discipline shows.",
    "Consistency creates confidence.",
    "Small wins add up.",
    "Focus on the next rep.",
    "You are stronger than yesterday.",
    "Earn the results you want.",
    "Hard days build strong people.",
    "Train with purpose.",
    "Comfort never built strength.",
    "Stay hungry. Stay humble.",
    "The work you put in today pays off tomorrow.",
    "No shortcuts. Just work.",
    "Strength starts with showing up.",
    "Trust the process.",
    "Do it tired. Do it anyway.",
    "Every session matters.",
    "You‚Äôre building something.",
    "Pain is temporary. Progress is permanent.",
    "Effort never goes unnoticed.",
    "You didn‚Äôt come this far to stop.",
    "Train your mind as hard as your body.",
    "Work now. Shine later.",
    "No one can do this for you.",
    "Become harder to break.",
    "Results reward discipline.",
    "This is how strength is earned.",
    "Do the reps. Get the results.",
    "Stay locked in.",
    "You‚Äôre stronger than you think.",
    "Keep stacking wins.",
    "Excuses don‚Äôt lift weight.",
    "Focus beats motivation.",
    "Train for progress, not approval.",
    "This effort compounds.",
    "You‚Äôre becoming more capable.",
    "One more set. One more step."
  ];

  // --- Quotes: no repeats until all are used ---
  let _quoteBag = [];
  let _lastQuote = null;

  function _shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  function _refillQuoteBag() {
    _quoteBag = _shuffle([...QUOTES]);
    if (_lastQuote && _quoteBag.length > 1 && _quoteBag[0] === _lastQuote) {
      [_quoteBag[0], _quoteBag[1]] = [_quoteBag[1], _quoteBag[0]];
    }
  }

  function updateQuote() {
    if (_quoteBag.length === 0) _refillQuoteBag();
    const q = _quoteBag.shift();
    _lastQuote = q;
    const box = document.getElementById("quoteBox");
    if (box) box.textContent = "‚Äú" + q + "‚Äù";
  }

  // ---------------------------------------
  // DATA: Days + Exercises
  // ---------------------------------------
  const DAYS = {
    day1: {
      label: "Upper 1 ‚Äì Push",
      exercises: [
        { name:"Dumbbell Bench Press", sets:3, reps:"8‚Äì10", weight:"25‚Äì40 lb dumbbells",
          notes:"Controlled reps. Shoulder blades squeezed. Stop 2 reps before failure.", img:"dumbbell-benchpress.gif" },
        { name:"Incline Dumbbell Press", sets:3, reps:"8‚Äì10", weight:"20‚Äì35 lb dumbbells",
          notes:"Bench 30‚Äì45¬∞. Slow lower. Light pause at bottom.", img:"incline-dumbbellpress.gif" },
        { name:"Dumbbell Lateral Raise", sets:3, reps:"12‚Äì15", weight:"10‚Äì15 lb dumbbells",
          notes:"No swing. Raise to shoulder height. Keep traps relaxed.", img:"dumbbell-lateralraise.gif" },
        { name:"Cable Chest Fly", sets:2, reps:"12‚Äì15", weight:"15‚Äì30 lb per side",
          notes:"Big stretch, then squeeze 1 sec at center.", img:"cable-fly.gif" },
        { name:"Rope Triceps Pushdown", sets:3, reps:"10‚Äì12", weight:"30‚Äì50 lb",
          notes:"Elbows pinned. Spread rope at bottom. Full control up.", img:"rope-pushdown.gif" },
      ]
    },

    day2: {
      label: "Upper 2 ‚Äì Pull",
      exercises: [
        { name:"Lat Pulldown", sets:3, reps:"8‚Äì10", weight:"70‚Äì100 lb",
          notes:"Full stretch at top. Pull elbows down. Chest tall.", img:"latpulldown.gif" },
        { name:"Seated Cable Row", sets:3, reps:"10", weight:"70‚Äì110 lb",
          notes:"Chest up. Pull elbows back. Squeeze shoulder blades.", img:"seated-cablerow.gif" },
        { name:"Machine Row OR Dumbbell Row", sets:2, reps:"10‚Äì12", weight:"Machine 50‚Äì90 lb / DB 25‚Äì45 lb",
          notes:"No jerking. Control the negative. Keep torso stable.", img:"dumbrow.gif" },
        { name:"Dumbbell Curl", sets:3, reps:"10‚Äì12", weight:"15‚Äì25 lb dumbbells",
          notes:"No swinging. Slow lower. Elbows close to sides.", img:"dumbbell-curl.gif" },
        { name:"Hammer Curl", sets:2, reps:"12", weight:"15‚Äì25 lb dumbbells",
          notes:"Neutral grip. Full range. Control down.", img:"hammer-curl.gif" },
      ]
    },

    day3: {
      label: "Upper 3 ‚Äì Shoulders & Arms",
      exercises: [
        { name:"Machine Shoulder Press", sets:3, reps:"8‚Äì10", weight:"40‚Äì80 lb",
          notes:"Seat so handles start near chin. Control down; don‚Äôt slam the stack.", img:"shoulder-press.gif" },
        { name:"Cable Lateral Raise", sets:3, reps:"12‚Äì15", weight:"5‚Äì15 lb",
          notes:"Smooth reps. Keep shoulder down away from ear.", img:"cable-lateral-raise.gif" },
        { name:"Rear Delt Fly (Machine/Cable)", sets:3, reps:"12‚Äì15", weight:"30‚Äì60 lb",
          notes:"Lead with elbows. Pause 1 sec at peak; don‚Äôt shrug.", img:"rear-delt-fly.gif" },
        { name:"Preacher Curl (Machine/EZ)", sets:3, reps:"10", weight:"30‚Äì60 lb",
          notes:"Full stretch at bottom; no bounce. Control the negative.", img:"preacher-curl.gif" },
        { name:"Overhead Cable Triceps Extension", sets:3, reps:"10‚Äì12", weight:"30‚Äì50 lb",
          notes:"Elbows narrow. Big stretch behind head. Smooth lockout.", img:"overhead-cable-triceps.gif" },
      ]
    },
    leg1: {
      label: "Leg 1 ‚Äì Quads & Glutes",
      exercises: [
        { name:"Leg Press (Machine)", sets:3, reps:"10‚Äì12", weight:"90‚Äì180 lb total",
          notes:"Feet shoulder-width on platform. Control the descent. Do not lock knees hard at the top.", img:"leg-press.gif" },
        { name:"Goblet Squat", sets:3, reps:"10‚Äì12", weight:"25‚Äì45 lb dumbbell",
          notes:"Hold the dumbbell close to chest. Sit between your hips, keep heels down and chest up.", img:"goblet-squat.gif" },
        { name:"Walking Lunge", sets:2, reps:"10 steps per leg", weight:"15‚Äì25 lb dumbbells",
          notes:"Long stride. Front knee tracks over toes, back knee drops toward the floor under control.", img:"walking-lunge.gif" },
        { name:"Leg Extension (Machine)", sets:2, reps:"12‚Äì15", weight:"40‚Äì80 lb",
          notes:"Pause and squeeze at the top. Lower under control; don‚Äôt swing the stack.", img:"leg-extension.gif" },
        { name:"Standing Calf Raise", sets:3, reps:"12‚Äì15", weight:"Bodyweight or light added load",
          notes:"Full stretch at bottom and hard squeeze at top. Use a stable support if needed.", img:"standing-calf-raise.gif" },
      ]
    },
    leg2: {
      label: "Leg 2 ‚Äì Posterior Chain",
      exercises: [
        { name:"Romanian Deadlift (DB/BB)", sets:3, reps:"8‚Äì10", weight:"60‚Äì135 lb total",
          notes:"Soft knees. Push hips back, feel the stretch in hamstrings. Keep back flat, bar close.", img:"romanian-deadlift.gif" },
        { name:"Hip Thrust (Bench/ Machine)", sets:3, reps:"10‚Äì12", weight:"60‚Äì135 lb",
          notes:"Drive through heels. Squeeze glutes hard at top and pause briefly.", img:"hip-thrust.gif" },
        { name:"Leg Curl (Machine)", sets:3, reps:"10‚Äì12", weight:"40‚Äì80 lb",
          notes:"Control the curl and the return. Don‚Äôt slam the stack at extension.", img:"leg-curl.gif" },
        { name:"Bodyweight Step-Up", sets:2, reps:"10 per leg", weight:"Bodyweight or light dumbbells",
          notes:"Plant whole foot on the step. Drive through heel and avoid pushing off the back leg.", img:"step-up.gif" },
        { name:"Seated Calf Raise", sets:3, reps:"12‚Äì15", weight:"25‚Äì70 lb",
          notes:"Slow stretch at bottom, strong squeeze at top. Do not bounce.", img:"seated-calf-raise.gif" },
      ]
    }
  };

  // ---------------------------
  // STATE
  // ---------------------------
  let currentDayKey = "day1";
  let idx = 0;

  let workoutComplete = false;
  
  let workoutStart = null;
  let workoutTimerId = null;

  let restSeconds = 0;
  let restTimerId = null;

  const el = (id) => document.getElementById(id);

  // ---------------------------
  // AUDIO HELPER
  // ---------------------------
  function playSound(id) {
    const a = document.getElementById(id);
    if (!a) return;
    try {
      a.currentTime = 0;
      a.volume = 0.05;
      a.play();
    } catch (e) {
      // ignore autoplay/gesture-related errors
    }
  }

  function fmt(sec) {
    const m = Math.floor(sec / 60);
    const s = sec % 60;
    return `${m}:${String(s).padStart(2, "0")}`;
  }

  function startWorkoutTimer() {
    if (workoutTimerId) return;
    workoutStart = Date.now();
    workoutTimerId = setInterval(() => {
      const elapsed = Math.floor((Date.now() - workoutStart) / 1000);
      el("workoutTime").textContent = fmt(elapsed);
    }, 250);
  }

  function resetWorkoutTimer() {
    if (workoutTimerId) clearInterval(workoutTimerId);
    workoutTimerId = null;
    workoutStart = null;
    el("workoutTime").textContent = "0:00";
  }

  function stopRestTimer() {
    if (restTimerId) clearInterval(restTimerId);
    restTimerId = null;
    restSeconds = 0;
    el("restTime").textContent = "0:00";
  }

  function startRestTimer(seconds = 75) {
    stopRestTimer();
    restSeconds = seconds;
    el("restTime").textContent = fmt(restSeconds);
    restTimerId = setInterval(() => {
      restSeconds--;
      el("restTime").textContent = fmt(Math.max(restSeconds, 0));
      if (restSeconds <= 0) {
        clearInterval(restTimerId);
        restTimerId = null;
        playSound("audioRestComplete");
        if (navigator.vibrate) navigator.vibrate([120, 80, 120]);
      }
    }, 1000);
  }

  function getExercises() {
    return DAYS[currentDayKey].exercises;
  }

  function renderTabs() {
    const sel = el("daySelect");
    if (sel && sel.value !== currentDayKey) {
      sel.value = currentDayKey;
    }
  }

function render() {
  renderTabs();
  const list = getExercises();
  const ex = list[idx];

  // ensure progress field exists
  if (typeof ex.doneSets !== "number") ex.doneSets = 0;

  // Grab layout pieces
  const exerciseGrid = el("exerciseGrid") || document.querySelector(".grid");
  const completionView = el("completionView");
  const row = document.querySelector(".row");
  const btnSet = el("btnSetDone");
  const btnReset = el("btnResetSet");
  const rulesBox = document.querySelector(".mini");

  if (workoutComplete) {
    // --- SHOW COMPLETION SCREEN ---
    if (exerciseGrid) exerciseGrid.style.display = "none";
    if (completionView) completionView.style.display = "block";

    // Hide exercise-only UI
    if (el("exImg")) el("exImg").style.display = "none";
    if (el("imgErr")) el("imgErr").style.display = "none";
    if (el("quoteBox")) el("quoteBox").style.display = "none";
    if (el("exName")) el("exName").style.display = "none";
    if (el("exNotes")) el("exNotes").style.display = "none";
    if (row) row.style.display = "none";
    if (btnSet) btnSet.style.display = "none";
    if (btnReset) btnReset.style.display = "none";

    // Hide Prev/Next buttons
    if (el("btnPrev")) el("btnPrev").style.display = "none";
    if (el("btnNext")) el("btnNext").style.display = "none";

    // Hide the checklist
    if (el("planList")) el("planList").style.display = "none";

    // Hide Rules / Progress mini box
    if (rulesBox) rulesBox.style.display = "none";

  } else {
    // --- NORMAL EXERCISE VIEW ---
    if (exerciseGrid) exerciseGrid.style.display = "grid";
    if (completionView) completionView.style.display = "none";

    // Show exercise UI again
    if (el("quoteBox")) el("quoteBox").style.display = "block";
    if (el("exName")) el("exName").style.display = "block";
    if (el("exNotes")) el("exNotes").style.display = "block";
    if (row) row.style.display = "flex";
    if (btnSet) btnSet.style.display = "inline-block";
    if (btnReset) btnReset.style.display = "inline-block";

    // Show Prev/Next
    if (el("btnPrev")) el("btnPrev").style.display = "inline-block";
    if (el("btnNext")) el("btnNext").style.display = "inline-block";

    // Show checklist
    if (el("planList")) el("planList").style.display = "block";

    // Show Rules / Progress mini box
    if (rulesBox) rulesBox.style.display = "block";

    // reset image error
    el("imgErr").style.display = "none";
    el("exImg").style.display = "block";

    // Fill in exercise details
    el("exName").textContent = `${idx + 1}/${list.length}: ${ex.name}`;
    el("exNotes").textContent = ex.notes;
    el("exSetsReps").textContent = `${ex.sets} √ó ${ex.reps}`;
    el("exWeight").textContent = ex.weight;
    el("exSetTracker").textContent = `Set ${ex.doneSets}/${ex.sets}`;

    el("exImg").src = "./" + ex.img;

    updateQuote();
  }

  // Plan list with completion checkmarks (data always kept in sync)
  el("planList").innerHTML = list
    .map((w, i) => {
      if (typeof w.doneSets !== "number") w.doneSets = 0;
      const isCurrent = i === idx;
      const isComplete = w.doneSets >= w.sets;
      let marker = "‚Ä¢";
      if (isComplete && isCurrent) marker = "‚úÖüëâ";
      else if (isComplete) marker = "‚úÖ";
      else if (isCurrent) marker = "üëâ";
      return `${marker} <b>${w.name}</b> ‚Äî ${w.sets}√ó${w.reps} ‚Äî ${w.weight}`;
    })
    .join("<br>");

  // Next button color based on completion of current exercise
  const nextBtn = el("btnNext");
  if (ex.doneSets >= ex.sets) {
    nextBtn.classList.add("next-ready");
  } else {
    nextBtn.classList.remove("next-ready");
  }
}



  function nextExercise() {
  stopRestTimer();

  // reset Next button color when moving to a new exercise
  el("btnNext").classList.remove("next-ready");

  const list = getExercises();
  if (idx < list.length - 1) {
    // Normal move to next exercise
    workoutComplete = false;
    idx++;
    render();
  } else {
    // LAST exercise ‚Üí show completion screen instead of popup
    workoutComplete = true;

    playSound("audioWorkoutComplete"); // still plays your old completion sound
    if (navigator.vibrate) navigator.vibrate([180, 120, 180, 120, 250]);

    // Optional: also play the visible completion audio clip
    const ca = el("completionAudio");
    if (ca) {
      try {
        ca.currentTime = 0;
        ca.play();
      } catch (e) {
        // ignore autoplay errors
      }
    }

    render();
  }
}

function prevExercise() {
  stopRestTimer();

  // If we‚Äôre on the completion screen, exit it
  workoutComplete = false;

  idx = Math.max(idx - 1, 0);
  render();
}

  function setDone() {
    const list = getExercises();
    const ex = list[idx];
    const nextBtn = el("btnNext");

    if (typeof ex.doneSets !== "number") ex.doneSets = 0;

    // Extra taps after all sets complete
    if (ex.doneSets >= ex.sets) {
      if (navigator.vibrate) navigator.vibrate(150);
      playSound("audioFinalSet");
      nextBtn.classList.add("next-ready");
      return;
    }

    // Log one more set
    ex.doneSets++;

    // Final set just completed
    if (ex.doneSets >= ex.sets) {
      stopRestTimer();
      if (navigator.vibrate) navigator.vibrate(150);
      playSound("audioFinalSet");
      nextBtn.classList.add("next-ready");
    } else {
      nextBtn.classList.remove("next-ready");
      playSound("audioSetDone");
      startRestTimer(75);
    }

    render();
  }

  function resetSets() {
    const list = getExercises();
    const ex = list[idx];
    ex.doneSets = 0;
    stopRestTimer();
    el("btnNext").classList.remove("next-ready");
    render();
  }

 function switchDay(dayKey) {
  currentDayKey = dayKey;
  idx = 0;
  workoutComplete = false;
  stopRestTimer();
  resetWorkoutTimer();
  el("btnNext").classList.remove("next-ready");
  render();
}


  // ---------------------------
  // EVENTS
  // ---------------------------
  el("btnStartWorkout").addEventListener("click", startWorkoutTimer);
  el("btnStartRest").addEventListener("click", () => startRestTimer(75));
  el("btnSetDone").addEventListener("click", () => { startWorkoutTimer(); setDone(); });
  el("btnResetSet").addEventListener("click", resetSets);

  el("btnNext").addEventListener("click", () => {
    playSound("audioSwipe");
    nextExercise();
  });

  el("btnPrev").addEventListener("click", () => {
    playSound("audioSwipe");
    prevExercise();
  });

  const daySel = el("daySelect");
  if (daySel) {
    daySel.addEventListener("change", (e) => switchDay(e.target.value));
  }

  // Initial render
  render();

  // App start sound
  window.addEventListener("load", () => {
    playSound("audioIntro");
  });
</script>
</body>
</html>
